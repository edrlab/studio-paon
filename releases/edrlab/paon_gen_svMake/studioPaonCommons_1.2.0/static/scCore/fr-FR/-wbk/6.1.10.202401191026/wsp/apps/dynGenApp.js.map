{"version":3,"sources":["/@back@/wsp/apps/dynGenApp.tsx"],"names":["BaseElementAsync","DynGen","REG","DOMSH","DynGenApp","[object Object]","init","this","appDef","attachShadow","SHADOWDOM_INIT","_initAndInstallSkin","localName","subInit","Object","create","dynGen","reg","view","shadowRoot","appendChild","initialize","def","visitor","options","Promise","resolve","undefined","registerSkin","customElements","define"],"mappings":"OAAQA,qBAAgC;;OAOhCC,WAAoB;OAEpBC,QAAI;OACJC,UAAM;OAMR,MAAOC,kBAAkBJ,iBAMpBK,kBAAkBC,MAC3BC,KAAKC,OAASF,KAAKE;AACnBD,KAAKE,aAAaN,MAAMO;AACxBH,KAAKI,oBAAoBJ,KAAKK,UAAWN;AACzC,MAAMO,QAAUC,OAAOC,OAAOR,KAAKC,OAAOQ;AAC1CH,QAAQI,IAAMX,KAAKW;AACnBV,KAAKW,KAAOX,KAAKY,WAAWC,aAAY,IAAInB,QAASoB,WAAWR,UAGjER,aAAaiB,KAEZ,OAAO,MAGRjB,WAAWkB,SACV,GAAIhB,KAAKW,KAAM,OAAOK,QAAQhB,KAAKW,MAGpCb,gBAAgBkB,QAAwCC,SACvD,OAAOjB,KAAKW,KAAOK,QAAQhB,KAAKW,MAAQO,QAAQC,QAAQC,YAI1DzB,IAAIe,IAAIW,aAAa,iBAAkB,EAAsB;AAQ7DC,eAAeC,OAAO,iBAAkB1B","sourcesContent":["import {BaseElementAsync, OSkinableInit} from \"back/commons/basis\";\nimport {IApp, IAppCtx} from \"back/core/appFrame\";\nimport {JDynGenAppDef} from \"back/wsp/plugins/dynGenPlg\";\n\nimport \"back/wsp/views/views_Perms\";\nimport {JSX} from \"lib/commons/xml/dom\";\nimport {IChainEnv} from \"lib/wsp/chain\";\nimport {DynGen, ODynGenInit} from \"back/wsp/views/dynGen\";\nimport {IView, IViewContainer, OViewVisitOptions} from \"lib/commons/views\";\nimport {REG} from \"lib/commons/registry\";\nimport {DOMSH} from \"lib/commons/xml/domsh\";\n\nexport interface DynGenApp extends BaseElementAsync {\n\tinitialize(init: IAppCtx<IChainEnv> & OSkinableInit): this;\n}\n\nexport class DynGenApp extends BaseElementAsync implements IApp<IChainEnv>, IViewContainer {\n\n\tappDef: JDynGenAppDef;\n\n\tview: DynGen;\n\n\tprotected async _initialize(init: IAppCtx<IChainEnv> & OSkinableInit) {\n\t\tthis.appDef = init.appDef as JDynGenAppDef;\n\t\tthis.attachShadow(DOMSH.SHADOWDOM_INIT);\n\t\tthis._initAndInstallSkin(this.localName, init);\n\t\tconst subInit = Object.create(this.appDef.dynGen) as ODynGenInit;\n\t\tsubInit.reg = init.reg;\n\t\tthis.view = this.shadowRoot.appendChild(new DynGen().initialize(subInit));\n\t}\n\n\tupdateAppDef(def: JDynGenAppDef): boolean {\n\t\t//A voir.\n\t\treturn false;\n\t}\n\n\tvisitViews(visitor: (view: IView) => any): any {\n\t\tif (this.view) return visitor(this.view);\n\t}\n\n\tvisitViewsAsync(visitor: (view: IView) => Promise<any>, options?: OViewVisitOptions): Promise<any> {\n\t\treturn this.view ? visitor(this.view) : Promise.resolve(undefined);\n\t}\n}\n\nREG.reg.registerSkin('wsp-dyngen-app', 1, /* language=CSS */ `\n\t:host {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tmin-height: 0;\n\t\tmin-width: 0;\n\t}\n`);\ncustomElements.define('wsp-dyngen-app', DynGenApp);\n"]}