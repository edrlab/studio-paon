{"version":3,"sources":["/@back@/wsp/views/item/itemRemoteRes.tsx"],"names":["REG","SRC","RemoteResRendererExtended","WSP","ItemRemoteRes","[object Object]","init","Object","assign","fetchResDesc","async","transform","fetchStreamJson","this","config","reg","env","wsp","srcRef","longDesc","location","status","super","_initialize","_a","longDescChange","add","ldNew","_refresh","registerSkin","customElements","define"],"mappings":"OACcA,QAAI;OAGEC,QAAI;OACgBC,8BAA0B;OAE1DC,QAAI;OAaN,MAAOC,sBAAsBF,0BAGlCG,YAAYC;AACXA,KAAOC,OAAOC,OAAO,CACpBC,aAAcC,UACb,IAAIC,UAAY;AAChB,OAAOR,IAAIS,gBAA0CC,KAAKC,OAAOC,IAAIC,IAAIC,IAAK,KAAMhB,IAAIiB,OAAOL,KAAKC,OAAOC,IAAIC,IAAIG,UAAWR,YAAc,CAACS,SAAU,KAAMC,QAAS,KAErKf;AAEHgB,MAAMC,YAAYjB,OAElBkB,GAAAX,KAAKC,OAAOC,IAAIC,IAAIS,kBAAc,MAAAD,UAAA,OAAA,EAAAA,GAAEE,IAAKC,OAAsBd,KAAKe,aAKtE5B,IAAIe,IAAIc,aAAa,sBAAuB,EAAsB;AAOlEC,eAAeC,OAAO,sBAAuB3B","sourcesContent":["import {IItemUiEnv} from \"back/wsp/views/itemMain\";\nimport {IReg, REG} from \"lib/commons/registry\";\nimport {IView} from \"lib/commons/views\";\nimport {JSX} from \"lib/commons/xml/dom\";\nimport {JSrcFields, SRC} from \"lib/wsp/src\";\nimport {ORemoteResRendererExtendedInit, RemoteResRendererExtended} from \"back/core/widgets/remoteResRenderer\";\nimport {JRemoteResDescFromClient} from \"lib/core/remote\";\nimport {WSP} from \"lib/wsp/wsp\";\n\n/**\n * View d'une res remote avec la nouvelle approche JRemoteResDesc\n */\nexport interface ItemRemoteRes extends RemoteResRendererExtended {\n\tinitialize(init: OItemRemoteResInit): this;\n}\n\nexport interface OItemRemoteResInit extends ORemoteResRendererExtendedInit {\n\treg?: IReg<IItemUiEnv>\n}\n\nexport class ItemRemoteRes extends RemoteResRendererExtended implements IView {\n\tpublic reg: IReg<IItemUiEnv>\n\n\t_initialize(init: OItemRemoteResInit) {\n\t\tinit = Object.assign({\n\t\t\tfetchResDesc: async () => {\n\t\t\t\tlet transform = \"transform=facet&facet=remoteContent&outType=RESDESC\";\n\t\t\t\treturn WSP.fetchStreamJson<JRemoteResDescFromClient>(this.config.reg.env.wsp, null, SRC.srcRef(this.config.reg.env.longDesc), transform) || {location: null, status: -1};\n\t\t\t},\n\t\t}, init);\n\n\t\tsuper._initialize(init);\n\n\t\tthis.config.reg.env.longDescChange?.add((ldNew: JSrcFields) => this._refresh());\n\t}\n\n}\n\nREG.reg.registerSkin(\"wsp-item-remote-res\", 1, /* language=CSS */ `\n\t:host {\n\t\toverflow: auto;\n\t\tdisplay: flex;\n\t}\n`);\n\ncustomElements.define(\"wsp-item-remote-res\", ItemRemoteRes);\n"]}