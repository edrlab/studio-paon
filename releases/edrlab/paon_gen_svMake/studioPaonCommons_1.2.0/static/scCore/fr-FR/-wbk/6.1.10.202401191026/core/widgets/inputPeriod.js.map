{"version":3,"sources":["/@back@/core/widgets/inputPeriod.tsx"],"names":["BaseElement","DOM","JSX","Action","ActionSeparator","REG","InputPeriod","currentMode","v","this","_currentMode","initialized","dispatchEvent","CustomEvent","bubbles","cancelable","[object Object]","init","reg","findReg","mode","createElement","î","actions","modes","buildDefaultModes","actionContext","label","defaultLabel","date1","type","hidden","betweenTxt","date2","_attach","localName","defaultDate1","valueAsNumber","defaultDate2","defaultMode","execute","modeId","find","act","getId","isSpecified","exclude","getMoreThan","getLessThan","InputPeriodSince","setLabel","InputPeriodFrom","setSelectedLabel","InputPeriodOlder","InputPeriodBefore","InputPeriodFromTo","InputPeriod_None","registerSkin","customElements","define","InputPeriodAction","selectedLabel","ctx","ev","getLabel","super","setHidden","InputPeriod_0_Action","InputPeriod_1_Action","value","InputPeriod_2_Action","betweenLabel","textContent","id","days","d","Date","setDate","getDate","setHours","getTime"],"mappings":"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","sourcesContent":["import {BaseElement, OSkinableInit} from \"back/commons/basis\";\nimport {DOM, JSX} from \"lib/commons/xml/dom\";\nimport {ButtonActions, OButtonActionsInit} from \"back/commons/widgets/buttons\";\nimport {Action, ActionSeparator, IAction} from \"lib/commons/actions\";\nimport {REG} from \"lib/commons/registry\";\n\n/**\n *\n */\nexport interface OInputPeriodInit extends OSkinableInit {\n\n\tdefaultLabel?: string\n\n\tmodes?: (InputPeriodAction | IAction<any> /* ACTION.SEPARATOR */)[]\n\n\tdefaultMode?: InputPeriodAction\n\tdefaultDate1?: number\n\tdefaultDate2?: number\n}\n\n/** Interface isolée pour le lazyLoading de ce fichier. */\nexport interface IInputPeriod {\n\n\tisSpecified(): boolean\n\n\tgetMoreThan(exclude: boolean): number | null\n\n\tgetLessThan(exclude: boolean): number | null\n}\n\nexport interface InputPeriod extends BaseElement, IInputPeriod {\n\tinitialize(init?: OInputPeriodInit): this;\n}\n\nexport class InputPeriod extends BaseElement implements IInputPeriod {\n\n\tmode: ButtonActions<InputPeriod>;\n\tdate1: HTMLInputElement;\n\tbetweenTxt: HTMLSpanElement;\n\tdate2: HTMLInputElement;\n\n\tprotected _currentMode: InputPeriodAction;\n\n\tset currentMode(v: InputPeriodAction) {\n\t\tthis._currentMode = v;\n\t\tif (this.initialized) this.dispatchEvent(new CustomEvent(\"change\", {bubbles: true, cancelable: false}));\n\t}\n\n\tget currentMode(): InputPeriodAction {\n\t\treturn this._currentMode;\n\t}\n\n\tprotected _initialize(init: OInputPeriodInit): void {\n\t\tconst reg = this.findReg(init);\n\n\t\tthis.mode = <c-button-actions î={{\n\t\t\treg,\n\t\t\tactions: init.modes || this.buildDefaultModes(),\n\t\t\tactionContext: this,\n\t\t\tlabel: init.defaultLabel || \"Période...\"\n\t\t} as OButtonActionsInit<InputPeriod>}/> as ButtonActions<InputPeriod>;\n\t\tthis.date1 = <input type=\"date\" hidden=\"true\"/> as HTMLInputElement;\n\t\tthis.betweenTxt = <span hidden=\"true\"/>;\n\t\tthis.date2 = <input type=\"date\" hidden=\"true\"/> as HTMLInputElement;\n\n\t\tthis._attach(this.localName, init, this.mode, this.date1, this.betweenTxt, this.date2);\n\n\t\tif (init.defaultDate1 > 0) this.date1.valueAsNumber = init.defaultDate1;\n\t\tif (init.defaultDate2 > 0) this.date2.valueAsNumber = init.defaultDate2;\n\t\tif (init.defaultMode) init.defaultMode.execute(this);\n\t}\n\n\t/** Réinitialisation du mode et des dates */\n\treset(modeId: string, date1: number, date2: number) {\n\t\tif (!this.initialized) throw \"InputPeriod must be initialized for be reseted\";\n\t\tthis._currentMode = this.mode.actions.find(act => act.getId() === modeId) as InputPeriodAction;\n\t\tif (date1 > 0) this.date1.valueAsNumber = date1;\n\t\tif (date2 > 0) this.date2.valueAsNumber = date2;\n\t\tif (this._currentMode) this._currentMode.execute(this);\n\t\tthis.dispatchEvent(new CustomEvent(\"change\", {bubbles: true, cancelable: false}));\n\t}\n\n\tisSpecified(): boolean {\n\t\treturn this._currentMode ? this._currentMode.isSpecified(this) : false;\n\t}\n\n\n\tgetMoreThan(exclude: boolean): number | null {\n\t\treturn this._currentMode ? this._currentMode.getMoreThan(exclude, this) : null;\n\t}\n\n\tgetLessThan(exclude: boolean): number | null {\n\t\treturn this._currentMode ? this._currentMode.getLessThan(exclude, this) : null;\n\t}\n\n\t// Sélecteurs dédiés à une date qui n'a pas de sens dans le futur (ex : date de modification)\n\tprivate buildDefaultModes() {\n\t\treturn [\n\t\t\tnew InputPeriodSince(\"sinceToday\", 0).setLabel(\"Aujourd'hui\"),\n\t\t\tnew InputPeriodSince(\"sinceYesterday\", 1).setLabel(\"Depuis hier\"),\n\t\t\tnew InputPeriodSince(\"since1Week\", 7).setLabel(\"Depuis une semaine\"),\n\t\t\tnew InputPeriodSince(\"since1Month\", 31).setLabel(\"Depuis un mois\"),\n\t\t\tnew InputPeriodFrom(\"since\").setLabel(\"Depuis le...\").setSelectedLabel(\"Depuis le\"),\n\t\t\tnew ActionSeparator(),\n\t\t\tnew InputPeriodOlder(\"older1Month\", 31).setLabel(\"Il y a plus d'un mois\"),\n\t\t\tnew InputPeriodOlder(\"older6Month\", 184).setLabel(\"Il y a plus de 6 mois\"),\n\t\t\tnew InputPeriodOlder(\"older1year\", 365).setLabel(\"Il y a plus d'un an\"),\n\t\t\tnew InputPeriodBefore(\"before\").setLabel(\"Avant le...\").setSelectedLabel(\"Avant le\"),\n\t\t\tnew ActionSeparator(),\n\t\t\tnew InputPeriodFromTo(\"between\").setLabel(\"Entre le...\").setSelectedLabel(\"Entre le\"),\n\t\t\tnew ActionSeparator(),\n\t\t\tnew InputPeriod_None(\"none\").setLabel(\"Aucune limite\").setSelectedLabel(\"Période...\"),\n\t\t];\n\t}\n\n\t// Sélecteurs dédiés à une date qui peut être définie dans le futur (ex : date de péremption, ...)\n\tstatic buildDefaultModes_futurAndPast() {\n\t\treturn [\n\t\t\tnew InputPeriodOlder(\"beforeToday\", 0).setLabel(\"Avant aujourd'hui\"),\n\t\t\tnew InputPeriodOlder(\"beforeTomorrow\", -1).setLabel(\"Avant demain\"),\n\t\t\tnew InputPeriodOlder(\"before1Week\", -7).setLabel(\"Avant une semaine\"),\n\t\t\tnew InputPeriodOlder(\"before1Month\", -31).setLabel(\"Avant un mois\"),\n\t\t\tnew InputPeriodOlder(\"older1Month\", 31).setLabel(\"Il y a plus d'un mois\"),\n\t\t\tnew InputPeriodOlder(\"older6Month\", 184).setLabel(\"Il y a plus de 6 mois\"),\n\t\t\tnew InputPeriodOlder(\"older1year\", 365).setLabel(\"Il y a plus d'un an\"),\n\t\t\tnew InputPeriodBefore(\"before\").setLabel(\"Avant le...\").setSelectedLabel(\"Avant le\"),\n\t\t\tnew ActionSeparator(),\n\t\t\tnew InputPeriodSince(\"sinceToday\", 0).setLabel(\"À partir d'aujourd'hui\"),\n\t\t\tnew InputPeriodSince(\"sinceYesterday\", -1).setLabel(\"À partir de demain\"),\n\t\t\tnew InputPeriodSince(\"since1Week\", -7).setLabel(\"Dans une semaine ou plus\"),\n\t\t\tnew InputPeriodSince(\"since1Month\", -31).setLabel(\"Dans un mois ou plus\"),\n\t\t\tnew InputPeriodSince(\"sinceYesterday\", 1).setLabel(\"Depuis hier\"),\n\t\t\tnew InputPeriodSince(\"since1Week\", 7).setLabel(\"Depuis une semaine\"),\n\t\t\tnew InputPeriodSince(\"since1Month\", 31).setLabel(\"Depuis un mois\"),\n\t\t\tnew InputPeriodFrom(\"since\").setLabel(\"Depuis le...\").setSelectedLabel(\"Depuis le\"),\n\t\t\tnew ActionSeparator(),\n\t\t\tnew InputPeriodFromTo(\"between\").setLabel(\"Entre le...\").setSelectedLabel(\"Entre le\"),\n\t\t\tnew ActionSeparator(),\n\t\t\tnew InputPeriod_None(\"none\").setLabel(\"Aucune limite\").setSelectedLabel(\"Période...\"),\n\t\t];\n\t}\n\n\t// Sélecteurs dédiés à une date qui peut être définie dans le futur (ex : date de péremption, ...)\n\tstatic buildDefaultModes_futur() {\n\t\treturn [\n\t\t\tnew InputPeriodOlder(\"beforeToday\", 0).setLabel(\"Avant aujourd'hui\"),\n\t\t\tnew InputPeriodOlder(\"beforeTomorrow\", -1).setLabel(\"Avant demain\"),\n\t\t\tnew InputPeriodOlder(\"before1Week\", -7).setLabel(\"Avant une semaine\"),\n\t\t\tnew InputPeriodOlder(\"before1Month\", -31).setLabel(\"Avant un mois\"),\n\t\t\tnew InputPeriodBefore(\"before\").setLabel(\"Avant le...\").setSelectedLabel(\"Avant le\"),\n\t\t\tnew ActionSeparator(),\n\t\t\tnew InputPeriodSince(\"sinceToday\", 0).setLabel(\"À partir d'aujourd'hui\"),\n\t\t\tnew InputPeriodSince(\"sinceYesterday\", -1).setLabel(\"À partir de demain\"),\n\t\t\tnew InputPeriodSince(\"since1Week\", -7).setLabel(\"Dans une semaine ou plus\"),\n\t\t\tnew InputPeriodSince(\"since1Month\", -31).setLabel(\"Dans un mois ou plus\"),\n\t\t\tnew InputPeriodFrom(\"since\").setLabel(\"Depuis le...\").setSelectedLabel(\"Depuis le\"),\n\t\t\tnew ActionSeparator(),\n\t\t\tnew InputPeriodFromTo(\"between\").setLabel(\"Entre le...\").setSelectedLabel(\"Entre le\"),\n\t\t\tnew ActionSeparator(),\n\t\t\tnew InputPeriod_None(\"none\").setLabel(\"Aucune limite\").setSelectedLabel(\"Période...\"),\n\t\t];\n\t}\n}\n\nREG.reg.registerSkin('c-input-period', 1, /* language=CSS */ `\n\t:host {\n\t\tdisplay: flex;\n\t\tmin-height: 0;\n\t\tmin-width: 0;\n\t\talign-items: center;\n\t}\n\n\tinput {\n\t\tmargin-inline-start: .5em;\n\t\tmargin-inline-end: .5em;\n\t}\n\n\t:host(:not([disabled])) c-button-actions {\n\t\tbackground-color: var(--form-bgcolor);\n\t\tborder: 1px solid var(--border-color);\n\t}\n`);\n\ncustomElements.define(\"c-input-period\", InputPeriod);\n\n/**\n *\n */\nexport abstract class InputPeriodAction extends Action<InputPeriod> {\n\n\tselectedLabel: string;\n\n\tsetSelectedLabel(label: string): this {\n\t\tthis.selectedLabel = label;\n\t\treturn this;\n\t}\n\n\tisSpecified(ctx: InputPeriod) {return true}\n\n\tgetMoreThan(exclude: boolean, ctx: InputPeriod): number | null {return null};\n\n\tgetLessThan(exclude: boolean, ctx: InputPeriod): number | null {return null};\n\n\texecute(ctx: InputPeriod, ev?: Event): any | \"noPreventDefault\" | \"noStopPropag\" | \"noStopPropag-noPreventDefault\" {\n\t\tctx.mode.label = this.selectedLabel || this.getLabel(ctx);\n\t\tctx.currentMode = this;\n\t}\n}\n\nexport class InputPeriod_None extends InputPeriodAction {\n\n\tisSpecified(ctx: InputPeriod) {return false}\n\n\texecute(ctx: InputPeriod, ev?: Event): any | \"noPreventDefault\" | \"noStopPropag\" | \"noStopPropag-noPreventDefault\" {\n\t\tsuper.execute(ctx);\n\t\tDOM.setHidden(ctx.date1, true);\n\t\tDOM.setHidden(ctx.betweenTxt, true);\n\t\tDOM.setHidden(ctx.date2, true);\n\t}\n}\n\nexport abstract class InputPeriod_0_Action extends InputPeriodAction {\n\n\texecute(ctx: InputPeriod, ev?: Event): any | \"noPreventDefault\" | \"noStopPropag\" | \"noStopPropag-noPreventDefault\" {\n\t\tsuper.execute(ctx);\n\t\tDOM.setHidden(ctx.date1, true);\n\t\tDOM.setHidden(ctx.betweenTxt, true);\n\t\tDOM.setHidden(ctx.date2, true);\n\t}\n}\n\nexport abstract class InputPeriod_1_Action extends InputPeriodAction {\n\n\tisSpecified(ctx: InputPeriod) {return !!ctx.date1.value}\n\n\texecute(ctx: InputPeriod, ev?: Event): any | \"noPreventDefault\" | \"noStopPropag\" | \"noStopPropag-noPreventDefault\" {\n\t\tsuper.execute(ctx);\n\t\tDOM.setHidden(ctx.date1, false);\n\t\tDOM.setHidden(ctx.betweenTxt, true);\n\t\tDOM.setHidden(ctx.date2, true);\n\t}\n}\n\n\nexport abstract class InputPeriod_2_Action extends InputPeriodAction {\n\n\tbetweenLabel: string = \" et le \";\n\n\tisSpecified(ctx: InputPeriod) {return !!ctx.date1.value && !!ctx.date2.value}\n\n\tsetBetweenLabel(label: string): this {\n\t\tthis.betweenLabel = label;\n\t\treturn this;\n\t}\n\n\texecute(ctx: InputPeriod, ev?: Event): any | \"noPreventDefault\" | \"noStopPropag\" | \"noStopPropag-noPreventDefault\" {\n\t\tsuper.execute(ctx);\n\t\tDOM.setHidden(ctx.date1, false);\n\t\tif (this.betweenLabel) {\n\t\t\tctx.betweenTxt.textContent = this.betweenLabel;\n\t\t\tDOM.setHidden(ctx.betweenTxt, false);\n\t\t} else {\n\t\t\tDOM.setHidden(ctx.betweenTxt, true);\n\t\t}\n\t\tDOM.setHidden(ctx.date2, false);\n\t}\n}\n\n\nexport class InputPeriodSince extends InputPeriod_0_Action {\n\tpublic days: number;\n\n\tconstructor(id: string, days: number) {\n\t\tsuper(id);\n\t\tthis.days = days;\n\t}\n\n\tgetMoreThan(exclude: boolean, ctx: InputPeriod): number | null {\n\t\tconst d = new Date();\n\t\td.setDate(d.getDate() - this.days);\n\t\td.setHours(0, 0, 0, 0);\n\t\treturn exclude ? d.getTime() - 1 : d.getTime();\n\t}\n}\n\nexport class InputPeriodOlder extends InputPeriodSince {\n\n\tgetMoreThan(exclude: boolean, ctx: InputPeriod): number | null {return null}\n\n\tgetLessThan(exclude: boolean, ctx: InputPeriod): number | null {\n\t\tconst d = new Date();\n\t\td.setDate(d.getDate() - this.days);\n\t\td.setHours(0, 0, 0, 0);\n\t\treturn exclude ? d.getTime() : d.getTime() - 1;\n\t}\n}\n\n\n/** après une date incluse. */\nexport class InputPeriodFrom extends InputPeriod_1_Action {\n\n\tgetMoreThan(exclude: boolean, ctx: InputPeriod): number | null {\n\t\tconst d = new Date(ctx.date1.value);\n\t\td.setHours(0, 0, 0, 0);\n\t\treturn exclude ? d.getTime() - 1 : d.getTime();\n\t}\n}\n\n/** avant une date exclue. */\nexport class InputPeriodBefore extends InputPeriod_1_Action {\n\n\tgetLessThan(exclude: boolean, ctx: InputPeriod): number | null {\n\t\tconst d = new Date(ctx.date1.value);\n\t\td.setHours(0, 0, 0, 0);\n\t\treturn exclude ? d.getTime() : d.getTime() - 1;\n\t}\n}\n\n/** entre deux dates incluses. */\nexport class InputPeriodFromTo extends InputPeriod_2_Action {\n\n\tgetMoreThan(exclude: boolean, ctx: InputPeriod): number | null {\n\t\tconst d = new Date(ctx.date1.value);\n\t\td.setHours(0, 0, 0, 0);\n\t\treturn exclude ? d.getTime() - 1 : d.getTime();\n\t}\n\n\tgetLessThan(exclude: boolean, ctx: InputPeriod): number | null {\n\t\tconst d = new Date(ctx.date2.value);\n\t\td.setDate(d.getDate() + 1);\n\t\td.setHours(0, 0, 0, 0);\n\t\treturn exclude ? d.getTime() : d.getTime() - 1;\n\t}\n}\n"]}